<ion-header>
  <ion-navbar no-border-bottom no-lines>
    <ion-title>
      订单
    </ion-title>
  </ion-navbar>
  <ion-segment  [(ngModel)]="curTab" (ionChange)="tabChange()">
    <ion-segment-button [value]="ORDER_ENUM.WAIT_PAY">
      待支付
    </ion-segment-button>
    <ion-segment-button [value]="ORDER_ENUM.WAIT_USE">
      待使用
    </ion-segment-button>
    <ion-segment-button [value]="ORDER_ENUM.USING">
      使用中
    </ion-segment-button>
    <ion-segment-button [value]="ORDER_ENUM.COMPLETED">
      已完成
    </ion-segment-button>
    <ion-segment-button [value]="ORDER_ENUM.REVOKED">
      撤销订单
    </ion-segment-button>
  </ion-segment>
  <!--<ion-toolbar no-border-top no-border-bottom>-->
    <!---->
  <!--</ion-toolbar>-->
</ion-header>

<ion-content>
  <div [ngSwitch]="curTab">
    <ion-list >
      <div text-center class="no-data" *ngIf="orderItems.length === 0 && !notLoadOver">
        <img src="./assets/img/no_order.png" alt="" >
        <p>您还没有订单哦!</p>
      </div>
      <ion-item-group *ngFor="let order of orderItems; let index = index">
        <ion-item-divider class="item-header" color="light">{{order.gymc}} {{order.sslc}}楼{{order.fjhb}}室</ion-item-divider>
        <ion-item class="item-content">
          <ion-thumbnail item-start>
            <img src="assets/img/thumbnail-puppy-1.jpg">
          </ion-thumbnail>
          <div style="overflow:hidden;" >
            <span float-left>面积45m²&ensp;&ensp;床宽1.5m</span>
            <h2 float-right class="money">￥{{order.ddje}}</h2>
          </div>
          <div>{{order.gydz}}西大旺陆家16号</div>
          <div class="min-font">{{order.rzkssj}}~{{order.rzjssj}}</div>
        </ion-item>
        <ion-item class="item-footer" *ngSwitchCase="ORDER_ENUM.WAIT_PAY">
          <button (tap)="goPay()" padding-left  padding-right ion-button item-right round outline>支付</button>
        </ion-item>
        <ion-item class="item-footer" *ngSwitchCase="ORDER_ENUM.WAIT_USE">
          <button (tap)="cancelOrder(order.ddbh, index)" padding-left  padding-right ion-button item-right round outline>申请退订</button>
        </ion-item>
        <ion-item class="item-footer" *ngSwitchCase="ORDER_ENUM.USING">
          <button (tap)="goPay()" padding-left  padding-right ion-button item-right round outline>获取钥匙</button>
          <button (tap)="leaveRoom(order.ddbh, index)" padding-left  padding-right ion-button item-right round outline>退房</button>
        </ion-item>
        <ion-item class="item-footer" *ngSwitchCase="ORDER_ENUM.REVOKED">
          <button  padding-left  padding-right ion-button item-right round outline>退款失败</button>
        </ion-item>
      </ion-item-group>
    </ion-list>


  </div>
  <ion-infinite-scroll [enabled]="notLoadOver" (ionInfinite)="$event.waitFor(getOrder($event))">
    <ion-infinite-scroll-content

      loadingSpinner="bubbles"
      loadingText="加载中......">
    </ion-infinite-scroll-content>
  </ion-infinite-scroll>
</ion-content>
